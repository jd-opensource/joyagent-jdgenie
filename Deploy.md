# JoyAgent-JDGenie è¯¦ç»†éƒ¨ç½²æŒ‡å—

æœ¬æ–‡æ¡£å°†å¼•å¯¼æ‚¨å®Œæˆ JoyAgent-JDGenie é¡¹ç›®å››ä¸ªæ ¸å¿ƒæœåŠ¡ï¼ˆå‰ç«¯ã€åç«¯ã€Toolsã€MCPï¼‰çš„å®Œæ•´éƒ¨ç½²æµç¨‹ã€‚

## ä¸€ã€ ç¯å¢ƒå‡†å¤‡ (Prerequisites)

åœ¨å¼€å§‹éƒ¨ç½²ä¹‹å‰ï¼Œè¯·ç¡®ä¿æ‚¨çš„å¼€å‘ç¯å¢ƒæ»¡è¶³ä»¥ä¸‹æ‰€æœ‰è¦æ±‚ã€‚å¦‚æœå·²ç»æ»¡è¶³å¯ä»¥ç›´æ¥è°ƒè¿‡ã€‚

### 1\. Java (ç‰ˆæœ¬ \> 17)

åç«¯æœåŠ¡éœ€è¦ Java 17 æˆ–æ›´é«˜ç‰ˆæœ¬ã€‚

- **macOS ç”¨æˆ· (æ¨èä½¿ç”¨ Homebrew)**
  æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å®‰è£… `maven`ï¼Œå®ƒä¼šè‡ªåŠ¨å®‰è£…æœ€æ–°ç‰ˆçš„ OpenJDKã€‚

  ```bash
  brew install maven
  ```

  å®‰è£…åï¼Œè®¾ç½® `JAVA_HOME` ç¯å¢ƒå˜é‡ã€‚é€šå¸¸ Homebrew çš„å®‰è£…è·¯å¾„ä¸º `/opt/homebrew/Cellar/openjdk/...`ã€‚

- **æ‰‹åŠ¨å®‰è£…**

  1.  ä» [Oracle å®˜æ–¹ç½‘ç«™](https://www.oracle.com/java/technologies/downloads/) ä¸‹è½½å¹¶å®‰è£…é€‚ç”¨äºæ‚¨æ“ä½œç³»ç»Ÿçš„ JDK (ç‰ˆæœ¬ \> 17)ã€‚
  2.  æ‰¾åˆ° Java çš„å®‰è£…è·¯å¾„ã€‚åœ¨ macOS ä¸Šå¯ä»¥ä½¿ç”¨ï¼š
      ```bash
      /usr/libexec/java_home -V
      ```
  3.  å°† `JAVA_HOME` æ·»åŠ åˆ°æ‚¨çš„ shell é…ç½®æ–‡ä»¶ä¸­ï¼ˆä»¥ `zsh` ä¸ºä¾‹ï¼‰ï¼š
      ```bash
      echo 'export JAVA_HOME=$(/usr/libexec/java_home -v 17)' >> ~/.zshrc # å°† 17 æ›¿æ¢ä¸ºæ‚¨å®‰è£…çš„ç‰ˆæœ¬
      echo 'export PATH=$JAVA_HOME/bin:$PATH' >> ~/.zshrc
      source ~/.zshrc
      ```

### 2\. pnpm (ç‰ˆæœ¬ \> 7)

å‰ç«¯é¡¹ç›®ä½¿ç”¨ `pnpm` ä½œä¸ºåŒ…ç®¡ç†å™¨ã€‚

- **å®‰è£… pnpm**
  è¯·å‚è€ƒ [pnpm å®˜æ–¹å®‰è£…æŒ‡å—](https://pnpm.io/zh/installation) è¿›è¡Œå®‰è£…ã€‚

- ğŸ’¡ **æç¤º**
  å¦‚æœ `pnpm` å®‰è£…ä¾èµ–åŒ…é€Ÿåº¦è¾ƒæ…¢ï¼Œå»ºè®®é…ç½®ä½¿ç”¨å›½å†…é•œåƒæºä»¥åŠ é€Ÿä¸‹è½½ã€‚

### 3\. Python & uv

Tools æœåŠ¡å’Œ MCP æœåŠ¡ä½¿ç”¨ Pythonã€‚`uv` æ˜¯ä¸€ä¸ªæé€Ÿçš„ Python åŒ…å®‰è£…å’Œç®¡ç†å·¥å…·ã€‚

- ç¡®ä¿æ‚¨çš„ç³»ç»Ÿå·²å®‰è£… Python (æ¨è 3.8+)ã€‚
- å®‰è£… `uv`ï¼š
  ```bash
  pip install uv
  ```

---

## äºŒã€ éƒ¨ç½²æ­¥éª¤

è¯·ä¸ºæ¯ä¸ªæ­¥éª¤æ‰“å¼€ä¸€ä¸ªæ–°çš„ç»ˆç«¯çª—å£ï¼Œä»¥ä¿æŒå„æœåŠ¡ç‹¬ç«‹è¿è¡Œã€‚

### æ­¥éª¤ä¸€ï¼šå¯åŠ¨å‰ç«¯æœåŠ¡ (UI)

æ­¤æœåŠ¡è´Ÿè´£åº”ç”¨çš„å›¾å½¢ç”¨æˆ·ç•Œé¢ã€‚

1.  æ‰“å¼€ä¸€ä¸ªæ–°ç»ˆç«¯ï¼Œè¿›å…¥ `ui` ç›®å½•å¹¶æ‰§è¡Œå¯åŠ¨è„šæœ¬ï¼š

    ```bash
    cd joyagent-jdgenie/ui
    sh start.sh
    ```

2.  **éªŒè¯æˆåŠŸ**
    å½“ç»ˆç«¯è¾“å‡ºä»¥ä¸‹ä¿¡æ¯æ—¶ï¼Œå³è¡¨ç¤ºå‰ç«¯æœåŠ¡å¯åŠ¨æˆåŠŸï¼š

    ```
    > Local:   http://localhost:3000/
    ```

    > **æ’é”™æç¤º**ï¼šå¦‚æœé‡åˆ° `pnpm: command not found` æˆ–å…¶ä»–ä¸ `pnpm` ç›¸å…³çš„é”™è¯¯ï¼Œè¯·è¿”å› **ç¯å¢ƒå‡†å¤‡** éƒ¨åˆ†ï¼Œæ£€æŸ¥ `pnpm` æ˜¯å¦å·²æ­£ç¡®å®‰è£…ã€‚

### æ­¥éª¤äºŒï¼šå¯åŠ¨åç«¯æœåŠ¡ (Backend)

æ­¤æœåŠ¡æ˜¯åº”ç”¨çš„æ ¸å¿ƒä¸šåŠ¡é€»è¾‘å±‚ã€‚

1.  æ‰“å¼€å¦ä¸€ä¸ªæ–°ç»ˆç«¯ï¼Œè¿›å…¥ `genie-backend` ç›®å½•ã€‚

2.  é¦–å…ˆï¼Œæ„å»ºé¡¹ç›®ï¼š

    ```bash
    cd joyagent-jdgenie/genie-backend
    sh build.sh
    ```

    çœ‹åˆ° `[INFO] BUILD SUCCESS` æ—¥å¿—å³è¡¨ç¤ºæ„å»ºæˆåŠŸã€‚

    > **æ’é”™æç¤º**ï¼šå¦‚æœæ„å»ºå¤±è´¥ï¼Œè¯·è¿”å› **ç¯å¢ƒå‡†å¤‡** éƒ¨åˆ†ï¼Œç¡®ä¿å·²æ­£ç¡®å®‰è£…å¹¶é…ç½® Java (ç‰ˆæœ¬ \> 17)ã€‚

3.  å¯åŠ¨åç«¯æœåŠ¡ï¼š

    ```bash
    sh start.sh
    ```

4.  æ‚¨å¯ä»¥éšæ—¶é€šè¿‡ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹å®æ—¶æ—¥å¿—ï¼š

    ```bash
    tail -f genie-backend_startup.log
    ```

#### åç«¯é…ç½® (å¯é€‰)

æ‚¨å¯ä»¥è‡ªå®šä¹‰åç«¯æœåŠ¡ä½¿ç”¨çš„ LLM (å¤§è¯­è¨€æ¨¡å‹) é…ç½®ã€‚

1.  ç¼–è¾‘é…ç½®æ–‡ä»¶ï¼š
    `joyagent-jdgenie/genie-backend/src/main/resources/application.yml`

2.  æ‰¾åˆ° `settings` éƒ¨åˆ†ï¼Œä¿®æ”¹æˆ–æ·»åŠ æ‚¨çš„æ¨¡å‹é…ç½®ã€‚`key` (ä¾‹å¦‚ `"claude-3-opus-20240229"`) æ˜¯æ¨¡å‹çš„å”¯ä¸€æ ‡è¯†ç¬¦ï¼Œå¯åœ¨åº”ç”¨å…¶ä»–åœ°æ–¹å¼•ç”¨ã€‚

    **ç¤ºä¾‹é…ç½®**ï¼š

    ```yaml
    settings: '{"claude-3-opus-20240229": {
            "model": "claude-3-opus-20240229",
            "max_tokens": 8192,
            "temperature": 0,
            "base_url": "<åœ¨æ­¤è¾“å…¥æ‚¨çš„ LLM API åœ°å€>",
            "apikey": "<åœ¨æ­¤è¾“å…¥æ‚¨çš„ LLM API Key>",
            "max_input_tokens": 128000
    }}'
    ```

3.  **é‡è¦**ï¼šä¿®æ”¹é…ç½®åï¼Œå¿…é¡»é‡æ–°æ‰§è¡Œæ„å»ºå’Œå¯åŠ¨å‘½ä»¤æ‰èƒ½ç”Ÿæ•ˆã€‚

    ```bash
    sh build.sh
    sh start.sh
    ```

### æ­¥éª¤ä¸‰ï¼šå¯åŠ¨ Tools æœåŠ¡ (genie-tool)

æ­¤æœåŠ¡æä¾›äº†ä¸€ç³»åˆ—å¤–éƒ¨å·¥å…·èƒ½åŠ›ï¼Œå¦‚ç½‘ç»œæœç´¢ã€‚

1.  æ‰“å¼€ç¬¬ä¸‰ä¸ªç»ˆç«¯ï¼Œè¿›å…¥ `genie-tool` ç›®å½•ã€‚

2.  ä½¿ç”¨ `uv` åˆ›å»ºå¹¶åŒæ­¥è™šæ‹Ÿç¯å¢ƒçš„ä¾èµ–ï¼š

    ```bash
    cd joyagent-jdgenie/genie-tool
    uv sync
    ```

3.  æ¿€æ´»è™šæ‹Ÿç¯å¢ƒï¼š

    ```bash
    source .venv/bin/activate
    ```

4.  **ä»…åœ¨é¦–æ¬¡å¯åŠ¨æ—¶**ï¼Œéœ€è¦åˆå§‹åŒ–æ•°æ®åº“ï¼š

    ```bash
    python -m genie_tool.db.db_engine
    ```

    åç»­å¯åŠ¨ä¸å†éœ€è¦æ‰§è¡Œæ­¤å‘½ä»¤ã€‚

5.  é…ç½®ç¯å¢ƒå˜é‡ã€‚é¦–å…ˆå¤åˆ¶æ¨¡æ¿æ–‡ä»¶ï¼š

    ```bash
    cp .env_template .env
    ```

6.  ç¼–è¾‘ `.env` æ–‡ä»¶ï¼Œå¡«å…¥æ‚¨çš„ `SERPER_SEARCH_API_KEY`ã€‚

    - æ‚¨å¯ä»¥ä» [serper.dev](https://serper.dev/) å…è´¹ç”³è¯·è¯¥ API Keyã€‚

7.  å¯åŠ¨ Tools æœåŠ¡ï¼š

    ```bash
    uv run python server.py
    ```

### æ­¥éª¤å››ï¼šå¯åŠ¨ MCP æœåŠ¡ (genie-client)

æ­¤æœåŠ¡æ˜¯æ¨¡å‹æ§åˆ¶å¹³å° (Model Control Platform)ã€‚

1.  æ‰“å¼€ç¬¬å››ä¸ªç»ˆç«¯ï¼Œè¿›å…¥ `genie-client` ç›®å½•ã€‚

2.  åˆ›å»ºå¹¶æ¿€æ´»è™šæ‹Ÿç¯å¢ƒï¼š

    ```bash
    cd joyagent-jdgenie/genie-client
    uv venv
    source .venv/bin/activate
    ```

3.  æ‰§è¡Œå¯åŠ¨è„šæœ¬ï¼š

    ```bash
    sh start.sh
    ```

---

è‡³æ­¤ï¼Œæ‰€æœ‰æœåŠ¡å‡å·²å¯åŠ¨ã€‚æ‚¨ç°åœ¨å¯ä»¥é€šè¿‡æµè§ˆå™¨è®¿é—® `http://localhost:3000/` å¼€å§‹ä½¿ç”¨ JoyAgent-JDGenie äº†ã€‚
